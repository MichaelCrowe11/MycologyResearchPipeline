{% extends "base.html" %}

{% block title %}Upgrade Membership - Mycology Research Pipeline{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center mb-4">
        <div class="col-lg-8 text-center">
            <h1>Upgrade Your Membership</h1>
            <p class="lead">Choose the plan that's right for your research needs</p>
        </div>
    </div>
    
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="row justify-content-center mb-4">
                <div class="col-lg-8">
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    {% endwith %}
    
    <div class="row justify-content-center mb-5">
        <div class="col-lg-12">
            <div class="row">
                <!-- Free Plan -->
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="card membership-card h-100">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Free</h5>
                            <div class="price">$0</div>
                            <div class="period">per month</div>
                            <ul class="feature-list list-unstyled">
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Basic Search
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Literature Export
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Visualization Tools
                                </li>
                                <li class="feature-item text-muted">
                                    <i class="fas fa-times text-danger me-2"></i> API Access
                                </li>
                                <li class="feature-item text-muted">
                                    <i class="fas fa-times text-danger me-2"></i> Advanced Analytics
                                </li>
                                <li class="feature-item text-muted">
                                    <i class="fas fa-times text-danger me-2"></i> Batch Processing
                                </li>
                            </ul>
                            <div class="mt-auto">
                                {% if current_user.active_membership and current_user.active_membership.plan == 'free' %}
                                    <button class="btn btn-outline-secondary w-100" disabled>Current Plan</button>
                                {% else %}
                                    <form method="post" action="{{ url_for('auth.upgrade_membership') }}">
                                        <input type="hidden" name="plan" value="free">
                                        <button type="submit" class="btn btn-outline-primary w-100">Select Plan</button>
                                    </form>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Basic Plan -->
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="card membership-card h-100">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Basic</h5>
                            <div class="price">$9.99</div>
                            <div class="period">per month</div>
                            <ul class="feature-list list-unstyled">
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Basic Search
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Literature Export
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Visualization Tools
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> API Access
                                </li>
                                <li class="feature-item text-muted">
                                    <i class="fas fa-times text-danger me-2"></i> Advanced Analytics
                                </li>
                                <li class="feature-item text-muted">
                                    <i class="fas fa-times text-danger me-2"></i> Batch Processing
                                </li>
                            </ul>
                            <div class="mt-auto">
                                {% if current_user.active_membership and current_user.active_membership.plan == 'basic' %}
                                    <button class="btn btn-outline-secondary w-100" disabled>Current Plan</button>
                                {% else %}
                                    <form method="post" action="{{ url_for('auth.upgrade_membership') }}">
                                        <input type="hidden" name="plan" value="basic">
                                        <button type="submit" class="btn btn-primary w-100">Upgrade to Basic</button>
                                    </form>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Pro Plan -->
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="card membership-card featured h-100">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Pro</h5>
                            <div class="price">$29.99</div>
                            <div class="period">per month</div>
                            <ul class="feature-list list-unstyled">
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Basic Search
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Literature Export
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Visualization Tools
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> API Access
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Advanced Analytics
                                </li>
                                <li class="feature-item text-muted">
                                    <i class="fas fa-times text-danger me-2"></i> Batch Processing
                                </li>
                            </ul>
                            <div class="mt-auto">
                                {% if current_user.active_membership and current_user.active_membership.plan == 'pro' %}
                                    <button class="btn btn-outline-secondary w-100" disabled>Current Plan</button>
                                {% else %}
                                    <form method="post" action="{{ url_for('auth.upgrade_membership') }}">
                                        <input type="hidden" name="plan" value="pro">
                                        <button type="submit" class="btn btn-primary w-100">Upgrade to Pro</button>
                                    </form>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Enterprise Plan -->
                <div class="col-md-6 col-lg-3 mb-4">
                    <div class="card membership-card h-100">
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">Enterprise</h5>
                            <div class="price">$99.99</div>
                            <div class="period">per month</div>
                            <ul class="feature-list list-unstyled">
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Basic Search
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Literature Export
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Visualization Tools
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> API Access
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Advanced Analytics
                                </li>
                                <li class="feature-item">
                                    <i class="fas fa-check text-success me-2"></i> Batch Processing
                                </li>
                            </ul>
                            <div class="mt-auto">
                                {% if current_user.active_membership and current_user.active_membership.plan == 'enterprise' %}
                                    <button class="btn btn-outline-secondary w-100" disabled>Current Plan</button>
                                {% else %}
                                    <form method="post" action="{{ url_for('auth.upgrade_membership') }}">
                                        <input type="hidden" name="plan" value="enterprise">
                                        <button type="submit" class="btn btn-primary w-100">Upgrade to Enterprise</button>
                                    </form>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Membership FAQ</h5>
                </div>
                <div class="card-body">
                    <div class="accordion" id="membershipFAQ">
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingOne">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                    How do the different membership tiers work?
                                </button>
                            </h2>
                            <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne" data-bs-parent="#membershipFAQ">
                                <div class="accordion-body">
                                    Our membership tiers are designed to provide different levels of access to our research tools and features. Each tier builds upon the previous one, adding more advanced capabilities to support your research needs. You can upgrade or downgrade your membership at any time.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingTwo">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                    What payment methods do you accept?
                                </button>
                            </h2>
                            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#membershipFAQ">
                                <div class="accordion-body">
                                    We accept all major credit cards, PayPal, and institutional purchase orders. For enterprise plans, we also offer invoicing options. Contact our support team for more information on payment methods.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingThree">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                    Can I cancel my membership at any time?
                                </button>
                            </h2>
                            <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#membershipFAQ">
                                <div class="accordion-body">
                                    Yes, you can cancel your membership at any time. When you cancel, you'll retain access to your current membership level until the end of your billing period. After that, your account will revert to the free tier.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingFour">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                    Are there discounts for academic institutions?
                                </button>
                            </h2>
                            <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour" data-bs-parent="#membershipFAQ">
                                <div class="accordion-body">
                                    Yes, we offer special pricing for academic institutions, research labs, and educational programs. Please contact our sales team to learn more about our academic licensing options and to request a quote for your institution.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingFive">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                    What is included in the API access?
                                </button>
                            </h2>
                            <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive" data-bs-parent="#membershipFAQ">
                                <div class="accordion-body">
                                    API access allows you to programmatically interact with our platform's features. This includes searching for research data, retrieving analysis results, submitting samples for processing, and integrating our tools into your own systems. Basic tier includes limited API calls, while higher tiers offer increased quotas and advanced endpoints.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}