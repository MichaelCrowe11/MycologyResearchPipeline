{% extends "base.html" %}

{% block title %}Documentation - Mycology Research Pipeline{% endblock %}

{% block content %}
<div class="hero-section hero-results mb-4">
    <div class="container">
        <div class="row">
            <div class="col-lg-8">
                <h1>Documentation</h1>
                <p>Comprehensive guides and reference materials for using the Mycology Research Pipeline platform effectively.</p>
            </div>
            <div class="col-lg-4 d-flex align-items-center justify-content-lg-end">
                <a href="{{ url_for('web.about') }}" class="btn btn-light">
                    <i class="fas fa-info-circle me-1"></i> About
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row mb-4">
    <div class="col-md-3">
        <div class="card shadow-sm mb-4">
            <div class="card-header">
                <h5 class="mb-0">Navigation</h5>
            </div>
            <div class="card-body p-0">
                <div class="list-group list-group-flush" id="doc-nav">
                    <a href="#getting-started" class="list-group-item list-group-item-action">Getting Started</a>
                    <a href="#samples" class="list-group-item list-group-item-action">Sample Management</a>
                    <a href="#analysis" class="list-group-item list-group-item-action">Running Analyses</a>
                    <a href="#batch" class="list-group-item list-group-item-action">Batch Processing</a>
                    <a href="#results" class="list-group-item list-group-item-action">Viewing Results</a>
                    <a href="#api" class="list-group-item list-group-item-action">API Reference</a>
                    <a href="#molecular" class="list-group-item list-group-item-action">Molecular Viewer</a>
                    <a href="#troubleshooting" class="list-group-item list-group-item-action">Troubleshooting</a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-md-9">
        <div class="card shadow-sm mb-4" id="getting-started">
            <div class="card-header">
                <h4>Getting Started</h4>
            </div>
            <div class="card-body">
                <h5>Welcome to the Mycology Research Pipeline</h5>
                <p>This guide will help you navigate the platform and use its features effectively for your mycology research.</p>
                
                <h5 class="mt-4">System Requirements</h5>
                <ul>
                    <li>Modern web browser (Chrome, Firefox, Safari, or Edge)</li>
                    <li>Internet connection</li>
                    <li>Account access (for secure features)</li>
                </ul>
                
                <h5 class="mt-4">Quick Start Guide</h5>
                <ol>
                    <li><strong>Add Samples:</strong> Start by adding mycological samples to the system.</li>
                    <li><strong>Run Analyses:</strong> Select a sample and run an analysis to discover bioactivity patterns.</li>
                    <li><strong>View Results:</strong> Explore the analysis results with interactive visualizations.</li>
                    <li><strong>Process Batches:</strong> For large datasets, use the batch processing functionality.</li>
                </ol>
                
                <div class="alert alert-info mt-4">
                    <i class="fas fa-info-circle me-2"></i> New to the platform? Check out our <a href="#quickstart-video" class="alert-link">video tutorial</a> for a guided walkthrough.
                </div>
            </div>
        </div>
        
        <div class="card shadow-sm mb-4" id="samples">
            <div class="card-header">
                <h4>Sample Management</h4>
            </div>
            <div class="card-body">
                <h5>Adding Samples</h5>
                <p>Samples represent mycological specimens that you want to analyze. To add a new sample:</p>
                <ol>
                    <li>Navigate to the <strong>Samples</strong> page</li>
                    <li>Click the <strong>Add Sample</strong> button</li>
                    <li>Fill in the required information (name, species, etc.)</li>
                    <li>Click <strong>Save</strong> to add the sample to the database</li>
                </ol>
                
                <h5 class="mt-4">Sample Fields</h5>
                <ul>
                    <li><strong>Name:</strong> Unique identifier for your sample (required)</li>
                    <li><strong>Species:</strong> Taxonomic classification</li>
                    <li><strong>Location:</strong> Where the sample was collected</li>
                    <li><strong>Collection Date:</strong> When the sample was collected</li>
                    <li><strong>Description:</strong> Additional notes about the sample</li>
                    <li><strong>Metadata:</strong> Custom JSON data for flexible information storage</li>
                </ul>
                
                <h5 class="mt-4">Adding Compounds</h5>
                <p>Once you've created a sample, you can add compounds to it:</p>
                <ol>
                    <li>Navigate to the sample details page</li>
                    <li>Click the <strong>Add Compound</strong> button</li>
                    <li>Fill in the compound information</li>
                    <li>Click <strong>Save</strong> to add the compound to the sample</li>
                </ol>
            </div>
        </div>
        
        <div class="card shadow-sm mb-4" id="analysis">
            <div class="card-header">
                <h4>Running Analyses</h4>
            </div>
            <div class="card-body">
                <h5>Analysis Types</h5>
                <p>The platform supports several types of analyses:</p>
                <ul>
                    <li><strong>Bioactivity Analysis:</strong> Evaluates the bioactive properties of compounds</li>
                    <li><strong>Structural Analysis:</strong> Analyzes molecular structures and properties</li>
                    <li><strong>Comparative Analysis:</strong> Compares compounds across samples</li>
                    <li><strong>Classification:</strong> Categorizes compounds based on their properties</li>
                </ul>
                
                <h5 class="mt-4">Running an Analysis</h5>
                <ol>
                    <li>Navigate to the <strong>Analysis</strong> page</li>
                    <li>Select a sample from the dropdown menu</li>
                    <li>Choose the analysis type</li>
                    <li>Configure any specific parameters (optional)</li>
                    <li>Click <strong>Start Analysis</strong> to begin processing</li>
                </ol>
                
                <div class="alert alert-warning mt-4">
                    <i class="fas fa-exclamation-triangle me-2"></i> Analyses can take several minutes to complete depending on the complexity and size of the data.
                </div>
            </div>
        </div>
        
        <div class="card shadow-sm mb-4" id="api">
            <div class="card-header">
                <h4>API Reference</h4>
            </div>
            <div class="card-body">
                <p>The Mycology Research Pipeline provides a comprehensive API for programmatic access to all platform features.</p>
                
                <h5 class="mt-4">API Endpoints</h5>
                <p>Key endpoints include:</p>
                <ul>
                    <li><code>/api/health</code> - Check API health status</li>
                    <li><code>/api/samples</code> - Manage samples</li>
                    <li><code>/api/samples/{id}</code> - Access specific sample</li>
                    <li><code>/api/analysis</code> - Start or manage analyses</li>
                    <li><code>/api/analysis/{id}</code> - Access specific analysis</li>
                    <li><code>/api/batch</code> - Manage batch processing jobs</li>
                </ul>
                
                <div class="alert alert-info mt-4">
                    <i class="fas fa-info-circle me-2"></i> For complete API documentation, visit <a href="/docs" class="alert-link">the Swagger UI documentation</a>.
                </div>
                
                <h5 class="mt-4">API Client</h5>
                <p>For convenience, we provide a Python client for interacting with the API:</p>
                <pre class="bg-dark text-light p-3"><code>from api_client import ApiClient

# Initialize the client
client = ApiClient(base_url="http://localhost:8000")

# Get a list of samples
samples = client.get_samples()

# Process a sample
result = client.process_sample(
    input_data="sample_data.csv",
    parameters={"analysis_type": "bioactivity_analysis"}
)</code></pre>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Smooth scrolling for documentation navigation
        document.querySelectorAll('#doc-nav a').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                window.scrollTo({
                    top: targetElement.offsetTop - 100,
                    behavior: 'smooth'
                });
                
                // Update active state
                document.querySelectorAll('#doc-nav a').forEach(a => a.classList.remove('active'));
                this.classList.add('active');
            });
        });
        
        // Highlight current section based on scroll position
        window.addEventListener('scroll', function() {
            const scrollPosition = window.scrollY;
            
            document.querySelectorAll('.card[id]').forEach(section => {
                const sectionTop = section.offsetTop - 120;
                const sectionBottom = sectionTop + section.offsetHeight;
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                    const id = section.getAttribute('id');
                    document.querySelectorAll('#doc-nav a').forEach(a => a.classList.remove('active'));
                    document.querySelector(`#doc-nav a[href="#${id}"]`).classList.add('active');
                }
            });
        });
    });
</script>
{% endblock %}